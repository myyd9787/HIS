<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>常数类别管理</title>
    <link rel="shortcut icon" href="./favicon.ico" type="image/x-icon" />
    <link rel="stylesheet" href="./static/css/font.css">
    <link rel="stylesheet" href="./static/css/weadmin.css">
    <script type="text/javascript" src="../../lib/layui/layui.all.js" charset="utf-8"></script>
    <script type="text/javascript" src="../../lib/layui/layui.js" charset="utf-8"></script>
    <link rel="stylesheet" type="text/css" href="css/index.css"/>
    <link rel="stylesheet" type="text/css" href="../../lib/layui/css/layui.css"/>
    <link rel="stylesheet" type="text/css" href="../../lib/css/constant.css"/>
    <script src="../../lib/jquery/jquery-3.2.1.js" type="text/javascript" charset="utf-8"></script>
   
</head>
<body>
    <div id="top">
        
        <form id="constantForm" action="ManagerServlet?method=searchConstantList" method="post">
        	<input type="text" name="title"  placeholder="请输入常数类别编码或名称"  class="layui-input">
        </form>
        <button class="layui-btn layui-btn-radius" id="search">常数类别查询</button>
        <button class="layui-btn layui-btn-radius" >新增常数类别</button>
        <button class="layui-btn layui-btn-radius">常数项管理</button>
    </div>
    <div id="content" >
        <table class="layui-table" lay-even lay-skin="nob" id="constant">


        </table>
    </div>



</body>

<script>

	
	
		function search(){
		$("#constantForm").submit();
	}
	
	
	
	$("#search").click(function(){
        	search();
        	alert("1");
        	layui.use('table', function(){
        	var table = layui.table;
        	var constantList=table.render({
        	elem:'#constant',
            url:"../../ManagerServlet?method=search",
            page:true,
			parseData: function(res) { //res 即为原始返回的数据		    
			return {
		      "code":0, //解析接口状态
		      "msg": "", //解析提示文本
		      "count": res.length, //解析数据长度
		      "data": res //解析数据列表
		    };
		   },
            cols:[[
                {field: 'constantTypeCode', title: '类别编码', width:180}
                ,{field: 'constantTypeName', title: '类别名称', width:180}
                ,{field: 'id', title: 'ID', width:80}
            ]]
        })
        })
        	})

    layui.use('table', function(){
        var table = layui.table;
        // console.log(constantTypeJSON);
        var constant=table.render({
            elem:'#constant',
            url:"../../ManagerServlet?method=constantList",
            page:true,
			parseData: function(res) { //res 即为原始返回的数据		    
			return {
		      "code":0, //解析接口状态
		      "msg": "", //解析提示文本
		      "count": res.length, //解析数据长度
		      "data": res //解析数据列表
		    };
		   },
            cols:[[
                {field: 'constantTypeCode', title: '类别编码', width:180}
                ,{field: 'constantTypeName', title: '类别名称', width:180}
                ,{field: 'id', title: 'ID', width:80}
            ]]
        })
        
        
        
        
        
    })
</script>
</html>